# Python ツール方針（加美電機向け）

この文書は Python で作る社内ツールの共通方針。
最優先は docs/ai/PROJECT_CONTEXT.md の前提。

## 対象ユースケース（典型）
- AOI/ICT ログの解析、集計、可視化（CSV/Excel）
- 製造データの前処理（欠損・外れ値・形式揺れの吸収）
- DB への投入・抽出（MySQL/MariaDB）
- バッチ処理・定期処理（cron等）

## 必須ルール
- 可能な限りコメントを残す（why/業務的意味/前提/例外/暫定処置）。
- 実装変更時は必ずドキュメントも更新する（最低限 docs/changes/CHANGELOG.md）。
- 過剰設計・過剰抽象化は禁止。読みやすさ・追いやすさ優先。
- 例外・入力揺れ（文字コード、区切り、欠損、異常値）を前提に堅牢に作る。

## Python 実装指針（現場向け）
- 入口は CLI（argparse）を基本。入出力を明確に。
- 依存は最小限。導入手順が簡単であることを優先。
- ログは必須（標準logging）。障害解析できる粒度で。

## データ処理
- pandas は可。ただし処理の意図が分かるように分割・コメントを書く。
- Excel入出力が絡む場合は、入力仕様（シート名/列名/型）を README に明記。

## DBアクセス
- 原則：SQLが明確なら SQL を優先。
- ORM は状況次第（読みやすさが増すなら可）。
  - CRUD中心ならORM可
  - JOIN/集計/複雑条件はSQLの方が明確ならSQL優先
- 推奨：SQLAlchemy Core（SQL寄り）または mysqlclient/pymysql + 生SQL（最小）
- 重要：クエリの意図・前提・例外をコメントで残す

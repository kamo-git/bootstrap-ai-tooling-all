# C# ツール方針（加美電機向け）

この文書は C#/.NET で作る社内ツールの共通方針。
最優先は docs/ai/PROJECT_CONTEXT.md の前提。

## 対象ユースケース（典型）
- 検査装置ログの取り込み/整形（CSV/TSV/独自形式）
- DBへの投入・抽出（MySQL/MariaDB）
- 現場向け小規模GUI/CLI
- 既存資産（古いコード/手作業）を段階的に置換

## 必須ルール
- 可能な限りコメントを残す（why/業務的意味/前提/例外/暫定処置）。
- 実装変更時は必ずドキュメントも更新する（最低限 docs/changes/CHANGELOG.md）。
- 過剰設計・過剰抽象化は禁止。読みやすさ・追いやすさ優先。
- 例外・入力揺れ（文字コード、区切り、欠損、異常値）を前提に堅牢に作る。

## .NET 設計指針（現場向け）
- まずは「単一責務の小さなクラス」+「直線的な処理フロー」。
- DI/クリーンアーキテクチャ等は、保守が容易になる範囲に限定。
- ログは必須（Console/ファイル/必要ならDB）。障害解析できる粒度で。

## DBアクセス
- 原則：SQLが明確なら SQL を優先。
- ORM は状況次第（読みやすさが増すなら可）。
  - CRUD中心ならORM可
  - JOIN/集計/複雑条件はSQLの方が明確ならSQL優先
- 推奨：Dapper（SQLを保持しつつ薄い抽象）または ADO.NET（最小依存）
- 重要：クエリの意図・前提・例外をコメントで残す

## 実行形態
- CLI優先（現場PCで動く、手順が単純、ログ採取しやすい）
- GUIが必要なら WinForms/WPF を最小構成で（過剰なMVVMは避ける）
